<!doctype html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Bugzilla service</title>

<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js"></script>
-->
    <script src="jquery.min.js"></script>

    <script type="text/javascript">

    //var bugquery = "username=bugzilla-apiuser.gen&password=bugs4all&product=Marvin&component=User%20Interface";

    $(document).ready(init);

    var baseUrl = "https://bugs.cisco.com/bzapi/count?";
    var bugQuery = "product=TC%20software&component=Touch%20UI&resolution=---";

    var username = "bugzilla-apiuser.gen";
    var password = "bugs4all";

    function init() {
        var url = baseUrl + bugQuery + "&username=" + username + "&password=" + password;
        url = url + "&callback"; // JSON-P callback param
        console.log(url);
        getJsonP(url);
    }

    function getJsonP(url) {
        $.getJSON(url,
        {
            format: "json"
        },
        function(data) {
            console.log(data.data);
            $("#bug-count").html(data.data);
        });
    }
    </script>

  </head>

  <body>

    <div>Bug count: <span id="bug-count">?</span>
    </div>

  </body>

</html>
